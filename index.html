<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MyToken (MTK) - Official Page</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #0f172a; color: white; text-align: center; padding: 50px; }
        .container { max-width: 600px; margin: 0 auto; }
        .logo { width: 128px; height: 128px; margin-bottom: 20px; }
        h1 { color: #818cf8; }
        .contract { background: #1e293b; padding: 15px; border-radius: 8px; word-break: break-all; font-family: monospace; }
        .links { margin-top: 30px; }
        a { color: #38bdf8; text-decoration: none; margin: 0 10px; }
        a:hover { text-decoration: underline; }
        .footer { margin-top: 50px; font-size: 0.8em; color: #64748b; }

        /* Widget Styles */
        .marketing-banner {
            background: linear-gradient(90deg, #ff8c00, #ff0080);
            color: white;
            padding: 10px;
            border-radius: 10px;
            margin-bottom: 20px;
            font-weight: bold;
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.02); }
            100% { transform: scale(1); }
        }
        .swap-widget {
            background: linear-gradient(145deg, #1e293b, #0f172a);
            border: 1px solid #334155;
            border-radius: 20px;
            padding: 20px;
            margin: 40px auto;
            max-width: 400px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.5);
            position: relative;
        }
        .swap-header { display: flex; justify-content: space-between; margin-bottom: 15px; color: #94a3b8; font-weight: bold; }
        .token-input {
            background: #0f172a;
            border: 1px solid #334155;
            border-radius: 12px;
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        .token-input input {
            background: transparent;
            border: none;
            color: white;
            font-size: 1.5em;
            width: 100%;
            outline: none;
        }
        .token-name { font-weight: bold; font-size: 1.2em; display: flex; align-items: center; gap: 10px; min-width: 80px;}
        .token-amount { color: #64748b; }
        .arrow-down { font-size: 1.5em; color: #94a3b8; margin: -5px 0 5px 0; }
        .swap-btn {
            background: linear-gradient(90deg, #4f46e5, #ec4899);
            color: white;
            width: 100%;
            padding: 15px;
            border: none;
            border-radius: 15px;
            font-size: 1.2em;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.1s;
            text-decoration: none;
            display: block;
            box-sizing: border-box;
        }
        .swap-btn:hover { transform: scale(1.02); text-decoration: none; color: white; }
        .mode-switch {
            display: flex; justify-content: center; gap: 10px; margin-bottom: 20px;
        }
        .mode-btn {
            background: #334155; color: white; border: none; padding: 8px 16px; border-radius: 20px; cursor: pointer;
        }
        .mode-btn.active { background: #818cf8; }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/6.13.5/ethers.umd.min.js"></script>
</head>
<body>
    <div class="container">
        <!-- Logo will be displayed here -->
        <img src="logo.svg" alt="MyToken Logo" class="logo">
        
        <h1>MyToken (MTK)</h1>
        <p>The future of decentralized finance. A community-driven token on the Ethereum network.</p>
        
        <div class="contract">
            Contract Address:<br>
            <strong>0x17fa1ccE5F0caD23C0805EB854043AD506327763</strong>
        </div>

        <!-- Swap Widget -->
        <div class="swap-widget">
            <div class="mode-switch">
                <button class="mode-btn active" id="btn-direct">Direct Buy (No Limits)</button>
                <button class="mode-btn" id="btn-uniswap">Uniswap V2</button>
            </div>

            <!-- Direct Buy Form -->
            <div id="direct-buy-form">
                <div class="swap-header">
                    <span>Buy Directly</span>
                    <span>No Slippage</span>
                </div>
                
                <div class="token-input">
                    <div class="token-name">üíé ETH</div>
                    <input type="number" id="eth-input" placeholder="0.0" oninput="calcTokens()">
                </div>

                <div class="arrow-down">‚¨áÔ∏è</div>

                <div class="token-input">
                    <div class="token-name">üöÄ MTK</div>
                    <input type="text" id="token-output" placeholder="0.0" disabled style="color: #94a3b8;">
                </div>

                <button onclick="buyTokens()" class="swap-btn" id="buy-btn">
                    CONNECT WALLET
                </button>
                <p id="status" style="margin-top: 10px; font-size: 0.9em; color: #cbd5e1;"></p>
            </div>

            <!-- Uniswap Link (Hidden by default) -->
            <div id="uniswap-link" style="display: none; text-align: center; padding: 20px;">
                <p>Trade on the open market.</p>
                <a href="https://app.uniswap.org/swap?outputCurrency=0x17fa1ccE5F0caD23C0805EB854043AD506327763&chain=mainnet" target="_blank" class="swap-btn">
                    GO TO UNISWAP
                </a>
            </div>
        </div>


        <div class="links">
            <button onclick="addToken()" style="background: #e2761b; color: white; padding: 10px 20px; border: none; border-radius: 10px; cursor: pointer; font-weight: bold; margin-bottom: 20px;">
                ü¶ä Add to MetaMask
            </button>
            
            <div style="margin: 20px auto; background: #1e293b; padding: 15px; border-radius: 15px; border: 1px solid #334155; max-width: 400px;">
                <h3 style="color: #fcd34d; margin: 0 0 10px 0;">üê≥ Large Buy (> $10k)</h3>
                <p style="font-size: 0.9em; color: #cbd5e1;">Avoid high slippage on Uniswap.</p>
                <a href="https://t.me/CryptocurrencyAsk_Bot" target="_blank" style="display: inline-block; background: #fcd34d; color: #0f172a; padding: 10px 20px; border-radius: 10px; font-weight: bold; text-decoration: none; margin: 0;">
                    Buy via OTC / Presale
                </a>
            </div>

            <br>
            <a href="https://etherscan.io/token/0x17fa1ccE5F0caD23C0805EB854043AD506327763" target="_blank">View on Etherscan</a>
            <br><br>
            <a href="https://t.me/CryptocurrencyAsk_Bot" target="_blank" style="color: #4ade80; border: 1px solid #4ade80; padding: 10px 20px; border-radius: 20px;">üí¨ Telegram Support</a>
        </div>

        <div class="footer">
            <p>Official Contact Email:</p>
            <!-- –í–ê–ñ–ù–û: Etherscan —Ç—Ä–µ–±—É–µ—Ç, —á—Ç–æ–±—ã email –±—ã–ª –≤–∏–¥–µ–Ω –Ω–∞ —Å–∞–π—Ç–µ, –µ—Å–ª–∏ —É —Ç–µ–±—è –Ω–µ—Ç –¥–æ–º–µ–Ω–Ω–æ–π –ø–æ—á—Ç—ã -->
            <p><strong>haan.n@icloud.com</strong></p> 
            <p>&copy; 2025 MyToken Project</p>
        </div>
    </div>

    <script>
        // --- CONFIGURATION ---
        const PRESALE_ADDRESS = "0x761180A11665Ef96C6FcCD6d9e3E5349B9EA6Cd0"; // Presale Contract
        const RATE = 30000; // Tokens per 1 ETH
        // ---------------------

        // UI Logic
        const btnDirect = document.getElementById('btn-direct');
        const btnUniswap = document.getElementById('btn-uniswap');
        const directForm = document.getElementById('direct-buy-form');
        const uniswapLink = document.getElementById('uniswap-link');

        btnDirect.addEventListener('click', () => {
            btnDirect.classList.add('active');
            btnUniswap.classList.remove('active');
            directForm.style.display = 'block';
            uniswapLink.style.display = 'none';
        });

        btnUniswap.addEventListener('click', () => {
            btnUniswap.classList.add('active');
            btnDirect.classList.remove('active');
            directForm.style.display = 'none';
            uniswapLink.style.display = 'block';
        });

        function calcTokens() {
            const ethAmount = document.getElementById('eth-input').value;
            const tokenOutput = document.getElementById('token-output');
            if(ethAmount > 0) {
                tokenOutput.value = (ethAmount * RATE).toLocaleString();
            } else {
                tokenOutput.value = "0.0";
            }
        }

        // Web3 Logic
        let provider, signer, contract;
        const presaleAbi = [
            "function buyTokens() public payable"
        ];

        function isMobile() {
            return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        }

        async function buyTokens() {
            const status = document.getElementById('status');
            const btn = document.getElementById('buy-btn');

            // --- MOBILE DEEP LINKING ---
            if (typeof window.ethereum === 'undefined') {
                if (isMobile()) {
                    // –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ MetaMask (Deep Link)
                    // –°—Å—ã–ª–∫–∞ –æ—Ç–∫—Ä–æ–µ—Ç —ç—Ç–æ—Ç –∂–µ —Å–∞–π—Ç, –Ω–æ –≤–Ω—É—Ç—Ä–∏ –±—Ä–∞—É–∑–µ—Ä–∞ MetaMask
                    const currentUrl = window.location.host + window.location.pathname;
                    window.location.href = "https://metamask.app.link/dapp/" + currentUrl;
                    return;
                } else {
                    alert("Please install MetaMask extension in your browser!");
                    window.open("https://metamask.io/download/", "_blank");
                    return;
                }
            }
            // ---------------------------

            try {
                if(!provider) {
                    provider = new ethers.BrowserProvider(window.ethereum);
                    signer = await provider.getSigner();
                    btn.innerText = "BUY MTK";
                }

                const ethAmount = document.getElementById('eth-input').value;
                if(!ethAmount || ethAmount <= 0) {
                    alert("Please enter ETH amount");
                    return;
                }

                contract = new ethers.Contract(PRESALE_ADDRESS, presaleAbi, signer);

                status.innerText = "Confirm transaction in MetaMask...";
                
                const tx = await contract.buyTokens({
                    value: ethers.parseEther(ethAmount)
                });

                status.innerText = "Transaction sent! Waiting for confirmation...";
                btn.disabled = true;

                await tx.wait();

                status.innerText = "‚úÖ Success! Tokens purchased.";
                status.style.color = "#4ade80";
                btn.disabled = false;
                btn.innerText = "BUY MORE";

            } catch (error) {
                console.error(error);
                status.innerText = "‚ùå Error: " + (error.reason || error.message);
                status.style.color = "#ef4444";
            }
        }

        async function addToken() {
            const tokenAddress = '0x17fa1ccE5F0caD23C0805EB854043AD506327763';
            const tokenSymbol = 'MTK';
            const tokenDecimals = 18;
            
            // --- MOBILE DEEP LINKING ---
            if (typeof window.ethereum === 'undefined') {
                if (isMobile()) {
                    // –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ MetaMask, —á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å —Å–∞–π—Ç —Ç–∞–º
                    const currentUrl = window.location.host + window.location.pathname;
                    window.location.href = "https://metamask.app.link/dapp/" + currentUrl;
                    return;
                } else {
                    alert("Please install MetaMask to add this token!");
                    return;
                }
            }
            // ---------------------------

            try {
                await window.ethereum.request({
                    method: 'wallet_watchAsset',
                    params: {
                        type: 'ERC20',
                        options: {
                            address: tokenAddress,
                            symbol: tokenSymbol,
                            decimals: tokenDecimals,
                        },
                    },
                });
            } catch (error) {
                console.error(error);
            }
        }
    </script>
</body>
</html>
